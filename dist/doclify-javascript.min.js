/*!
  * @doclify/javascript v2.0.9
  * (c) 2020 Doclify
  * @license MIT
  */
/*!
  * @doclify/javascript v2.0.9
  * (c) 2020 Doclify
  * @license MIT
  */
var e,t;e=this,t=function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var t=function(e){this.config=Object.assign({maxSize:1/0,maxLength:1/0,maxAge:0,getSize:function(){return 1}},e||{}),this.entries=new Map,this.size=0,this.newest=this.oldest=void 0},r={length:{configurable:!0}};t.prototype.reset=function(){this.entries.clear(),this.size=0,this.newest=this.oldest=void 0},r.length.get=function(){return this.entries.size},t.prototype.has=function(e){return this.entries.has(e)},t.prototype.get=function(e){var t=this.entries.get(e);if(t){if(!(t.maxAge&&Date.now()-t.now>1e3*t.maxAge))return t.value;this.delete(t)}},t.prototype.set=function(e,t,r){void 0===r&&(r={});var n=r.maxAge||this.config.maxAge;if(n&&"number"!=typeof n)throw new TypeError("maxAge must be a number");var o="number"==typeof r.size?r.size:this.config.getSize(t,e);if(o>this.config.maxSize)return this.has(e)&&this.delete(e),!1;var s=this.entries.get(e);return s?(this.size-=s.size,s.update(t,o,n),this.markEntryAsUsed(s)):(s=new i(e,t,o,n),this.entries.set(e,s),this.newest?(this.newest.newer=s,s.older=this.newest):this.oldest=s),this.size+=o,this.newest=s,this.cleanup(),!0},t.prototype.markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,this.newest&&(this.newest.newer=e),this.newest=e)},t.prototype.delete=function(e){var t=e instanceof i?e:this.entries.get(e);return!!t&&(this.size-=t.size,t.size=0,t.newer=t.older=void 0,this.entries.delete(t.key))},t.prototype.cleanup=function(){for(;(this.length>this.config.maxLength||this.size>this.config.maxSize)&&this.shift(););},t.prototype.shift=function(){var e=this.oldest;return!!e&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),this.delete(e),!0)},Object.defineProperties(t.prototype,r);var i=function(e,t,r,i){this.key=e,this.newer=this.older=null,this.update(t,r,i)};i.prototype.update=function(e,t,r){this.value=e,this.size=t,this.maxAge=r,this.now=r?Date.now():null};var n=function(e){this.client=e,this.lang=void 0,this.perPage=void 0,this.page=void 0,this.q=[],this.includeQuery=[],this.selectQuery=[],this.orderQuery=[]};n.prototype.where=function(e,t,r){return void 0===r&&(r=t,t="eq"),this.q.push([e,t,r]),this},n.prototype.collection=function(e){return this.eq("sys.collection",e)},n.prototype.contentType=function(e){return this.eq("sys.contentType",e)},n.prototype.id=function(e){return this.eq("sys.id",e)},n.prototype.uid=function(e){return this.eq("sys.uid",e)},n.prototype.eq=function(e,t){return this.where(e,t)},n.prototype.not=function(e,t){return this.where(e,"not",t)},n.prototype.in=function(e,t){return this.where(e,"in",t)},n.prototype.nin=function(e,t){return this.where(e,"nin",t)},n.prototype.gt=function(e,t){return this.where(e,"gt",t)},n.prototype.gte=function(e,t){return this.where(e,"gte",t)},n.prototype.lt=function(e,t){return this.where(e,"lt",t)},n.prototype.lte=function(e,t){return this.where(e,"lte",t)},n.prototype.fulltext=function(e,t){return this.where(e,"fulltext",t)},n.prototype.match=function(e,t){return this.where(e,"match",t)},n.prototype.query=function(e){if("function"!=typeof e)throw new TypeError("Query parameter must be function.");return e.call(this,this),this},n.prototype.with=function(e){return this.include(e)},n.prototype.include=function(e){return this.includeQuery.push(e),this},n.prototype.select=function(e){return this.selectQuery.push(e),this},n.prototype.orderBy=function(e,t){return this.orderQuery.push([e,t||"asc"]),this},n.prototype.getParams=function(e){return void 0===e&&(e={}),Object.assign({q:JSON.stringify(this.q),include:this.includeQuery.length?JSON.stringify(this.includeQuery):void 0,order:this.orderQuery.length?JSON.stringify(this.orderQuery):void 0,select:this.selectQuery.length?JSON.stringify(this.selectQuery):void 0,lang:this.lang},e)},n.prototype.fetch=function(e){return this.client.cachedRequest("documents/search",{params:this.getParams({limit:e})})},n.prototype.paginated=function(e,t){return this.paginate(e,t)},n.prototype.paginate=function(e,t){return this.client.cachedRequest("documents/paginated",{params:this.getParams({perPage:t,page:e})})},n.prototype.first=function(){return this.client.cachedRequest("documents/single",{params:this.getParams()})};var o=function(e){function t(t,r){e.call(this,t),Object.setPrototypeOf(this,new.target.prototype),this.info=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={url:{configurable:!0},method:{configurable:!0},code:{configurable:!0},params:{configurable:!0},error:{configurable:!0},data:{configurable:!0}};return r.url.get=function(){return this.info.url},r.method.get=function(){return this.info.method.toUpperCase()},r.code.get=function(){return""+(this.info.code||-1)},r.params.get=function(){return this.info.params||{}},r.error.get=function(){return this.info.error||null},r.data.get=function(){return this.info.data||{}},t.prototype.toString=function(){return["Doclify call failed:",this.method+" "+this.url+" "+JSON.stringify(this.params)+" -",this.message,"(code "+this.code+")"].join(" ")},t.fromError=function(e){var r={code:e.response?e.response.status:null,url:e.request.url,method:e.request.method,data:e.response?e.response.data:null};return new t(e.message,r)},Object.defineProperties(t.prototype,r),t}(Error);function s(e){return JSON.parse(JSON.stringify(e))}var h=function(r){if(!r.repository&&!r.url)throw new TypeError("Repository or URL option is required");if(!r.key)throw new TypeError("API key is required");this.config=Object.assign({repository:null,key:null,cache:!1,timeout:1e4},r),this.http=e.create({baseURL:this.baseUrl,timeout:this.config.timeout,headers:{"x-api-key":this.config.key}}),this.http.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var i="object"==typeof this.config.cache&&this.config.cache?this.config.cache:{};this.cache=new t({maxAge:"number"==typeof i.maxAge?i.maxAge:30,maxSize:i.maxSize||3145728,maxLength:i.maxLength||1e3})},u={baseUrl:{configurable:!0}};return u.baseUrl.get=function(){return this.config.url||"https://"+this.config.repository+".cdn.doclify.io/api/v2"},h.prototype.request=function(e,t,r){var i=this;return void 0===t&&(t={}),void 0===r&&(r=!1),this.http.request(e,t).then((function(e){return r?e:e.data})).catch((function(r){var n=r.response&&r.response.data?r.response.data:{},s={url:i.baseUrl+"/"+e,code:r.response?r.response.status:-1,params:t.params||{},method:t.method||"GET",error:n.error||null,data:n},h=n.error?n.error.message:r.message;return Promise.reject(new o(h,s))}))},h.prototype.cachedRequest=function(e,t){var r=this;if(void 0===t&&(t={}),!this.config.cache)return this.request(e,t);var i=e+":"+JSON.stringify(t.params),n=this.cache.get(i);if(n instanceof Promise)return n.then((function(e){return s(e.data)}));if(n instanceof Error)return Promise.reject(n);if(void 0!==n)return Promise.resolve(s(n));t.headers=t.headers||{},t.headers["x-cache"]="1";var o=this.request(e,t,!0);return this.cache.set(i,o,{size:1}),o.then((function(e){var t=Number(e.headers["content-length"])||0;return r.cache.set(i,e.data,{size:t}),s(e.data)})).catch((function(e){throw r.cache.set(i,e),e}))},h.prototype.documents=function(){return new n(this)},Object.defineProperties(h.prototype,u),h},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios")):"function"==typeof define&&define.amd?define(["axios"],t):(e=e||self).DoclifyJS=t(e.axios);