/*!
  * @doclify/javascript v2.0.2
  * (c) 2020 Doclify
  * @license MIT
  */
/*!
  * @doclify/javascript v2.0.2
  * (c) 2020 Doclify
  * @license MIT
  */
var t,e;t=this,e=function(t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var e=function(t){this.config=Object.assign({maxSize:1/0,maxLength:1/0,maxAge:0,getSize:function(){return 1}},t||{}),this.entries=new Map,this.size=0,this.newest=this.oldest=void 0},r={length:{configurable:!0}};e.prototype.reset=function(){this.entries.clear(),this.size=0,this.newest=this.oldest=void 0},r.length.get=function(){return this.entries.size},e.prototype.has=function(t){return this.entries.has(t)},e.prototype.get=function(t){var e=this.entries.get(t);if(e){if(!(e.maxAge&&Date.now()-e.now>1e3*e.maxAge))return e.value;this.delete(e)}},e.prototype.set=function(t,e,r){void 0===r&&(r={});var n=r.maxAge||this.config.maxAge;if(n&&"number"!=typeof n)throw new TypeError("maxAge must be a number");var o="number"==typeof r.size?r.size:this.config.getSize(e,t);if(o>this.config.maxSize)return this.has(t)&&this.delete(t),!1;var s=this.entries.get(t);return s?(this.size-=s.size,s.update(e,o,n),this.markEntryAsUsed(s)):(s=new i(t,e,o,n),this.entries.set(t,s),this.newest?(this.newest.newer=s,s.older=this.newest):this.oldest=s),this.size+=o,this.newest=s,this.cleanup(),!0},e.prototype.markEntryAsUsed=function(t){t!==this.newest&&(t.newer&&(t===this.oldest&&(this.oldest=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.newest,this.newest&&(this.newest.newer=t),this.newest=t)},e.prototype.delete=function(t){var e=t instanceof i?t:this.entries.get(t);return!!e&&(this.size-=e.size,e.size=0,e.newer=e.older=void 0,this.entries.delete(e.key))},e.prototype.cleanup=function(){for(;(this.length>this.config.maxLength||this.size>this.config.maxSize)&&this.shift(););},e.prototype.shift=function(){var t=this.oldest;return!!t&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),this.delete(t),!0)},Object.defineProperties(e.prototype,r);var i=function(t,e,r,i){this.key=t,this.newer=this.older=null,this.update(e,r,i)};i.prototype.update=function(t,e,r){this.value=t,this.size=e,this.maxAge=r,this.now=r?Date.now():null};var n=function(t){this.client=t,this.lang=void 0,this.perPage=void 0,this.page=void 0,this.q=[],this.withLazy=[],this.order=[]};n.prototype.where=function(t,e,r){return void 0===r&&(r=e,e="eq"),this.q.push([t,e,r]),this},n.prototype.collection=function(t){return this.eq("sys.collection",t)},n.prototype.contentType=function(t){return this.eq("sys.contentType",t)},n.prototype.id=function(t){return this.eq("sys.id",t)},n.prototype.uid=function(t){return this.eq("sys.uid",t)},n.prototype.eq=function(t,e){return this.where(t,e)},n.prototype.not=function(t,e){return this.where(t,"not",e)},n.prototype.in=function(t,e){return this.where(t,"in",e)},n.prototype.nin=function(t,e){return this.where(t,"nin",e)},n.prototype.gt=function(t,e){return this.where(t,"gt",e)},n.prototype.gte=function(t,e){return this.where(t,"gte",e)},n.prototype.lt=function(t,e){return this.where(t,"lt",e)},n.prototype.lte=function(t,e){return this.where(t,"lte",e)},n.prototype.fulltext=function(t,e){return this.where(t,"fulltext",e)},n.prototype.match=function(t,e){return this.where(t,"match",e)},n.prototype.with=function(t){return this.withLazy.push(t),this},n.prototype.orderBy=function(t,e){return this.order.push([t,e||"asc"]),this},n.prototype.fetch=function(t){return this.client.cachedRequest("documents/search",{params:{q:JSON.stringify(this.q),with:this.withLazy.length?JSON.stringify(this.withLazy):void 0,order:this.order.length?JSON.stringify(this.order):void 0,limit:t,lang:this.lang}})},n.prototype.paginated=function(t,e){return this.client.cachedRequest("documents/paginated",{params:{q:JSON.stringify(this.q),with:this.withLazy.length?JSON.stringify(this.withLazy):void 0,order:this.order.length?JSON.stringify(this.order):void 0,perPage:e,page:t,lang:this.lang}})},n.prototype.first=function(){return this.client.cachedRequest("documents/single",{params:{q:JSON.stringify(this.q),with:this.withLazy.length?JSON.stringify(this.withLazy):void 0,order:this.order.length?JSON.stringify(this.order):void 0,lang:this.lang}})};var o=function(t){function e(e,r){t.call(this,e),Object.setPrototypeOf(this,new.target.prototype),this.info=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={url:{configurable:!0},method:{configurable:!0},code:{configurable:!0},params:{configurable:!0},error:{configurable:!0},data:{configurable:!0}};return r.url.get=function(){return this.info.url},r.method.get=function(){return this.info.method.toUpperCase()},r.code.get=function(){return""+(this.info.code||-1)},r.params.get=function(){return this.info.params||{}},r.error.get=function(){return this.info.error||null},r.data.get=function(){return this.info.data||{}},e.prototype.toString=function(){return["Doclify call failed:",this.method+" "+this.url+" "+JSON.stringify(this.params)+" -",this.message,"(code "+this.code+")"].join(" ")},e.fromError=function(t){var r={code:t.response?t.response.status:null,url:t.request.url,method:t.request.method,data:t.response?t.response.data:null};return new e(t.message,r)},Object.defineProperties(e.prototype,r),e}(Error),s=function(r){if(!r.repository&&!r.url)throw new TypeError("Repository or URL option is required");if(!r.key)throw new TypeError("API key is required");this.config=Object.assign({repository:null,key:null,cache:!1},r),this.http=t.create({baseURL:this.baseUrl,headers:{"x-api-key":this.config.key}}),this.http.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)}));var i="object"==typeof this.config.cache&&this.config.cache?this.config.cache:{};this.cache=new e({maxAge:"number"==typeof i.maxAge?i.maxAge:30,maxSize:i.maxSize||3145728,maxLength:i.maxLength||1e3})},h={baseUrl:{configurable:!0}};return h.baseUrl.get=function(){return this.config.url||"https://"+this.config.repository+".cdn.doclify.io/api/v2"},s.prototype.request=function(t,e,r){var i=this;return void 0===e&&(e={}),void 0===r&&(r=!1),this.http.request(t,e).then((function(t){return r?t:t.data})).catch((function(r){var n=r.response&&r.response.data?r.response.data:{},s={url:i.baseUrl+"/"+t,code:r.response?r.response.status:-1,params:e.params||{},method:e.method||"GET",error:n.error||null,data:n},h=n.error?n.error.message:r.message;return Promise.reject(new o(h,s))}))},s.prototype.cachedRequest=function(t,e){var r=this;if(void 0===e&&(e={}),!this.config.cache)return this.request(t,e);var i=t+":"+JSON.stringify(e.params),n=this.cache.get(i);if(n instanceof Promise)return n.then((function(t){return t.data}));if(n instanceof Error)return Promise.reject(n);if(void 0!==n)return Promise.resolve(n);var o=this.request(t,e,!0);return this.cache.set(i,o,{size:1}),o.then((function(t){var e=Number(t.headers["content-length"])||0;return r.cache.set(i,t.data,{size:e}),t.data})).catch((function(t){throw r.cache.set(i,t),t}))},s.prototype.documents=function(){return new n(this)},Object.defineProperties(s.prototype,h),s},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("axios")):"function"==typeof define&&define.amd?define(["axios"],e):(t=t||self).DoclifyJS=e(t.axios);